# üß† Alice Predictions - AI Trading System

[![Live Status](https://img.shields.io/badge/Status-Live-brightgreen)](https://alice-predictions.pages.dev/)
[![Version](https://img.shields.io/badge/Version-v1.2.0-blue)](https://github.com/benjaduval/eth-trader)
[![Cloudflare](https://img.shields.io/badge/Hosted%20on-Cloudflare%20Pages-orange)](https://pages.cloudflare.com/)
[![TimesFM](https://img.shields.io/badge/AI%20Model-TimesFM-purple)](https://research.google/blog/a-decoder-only-foundation-model-for-time-series-forecasting/)

## üìã Vue d'Ensemble

**Alice Predictions** est un syst√®me de trading automatis√© utilisant l'intelligence artificielle TimesFM de Google Research pour pr√©dire les prix des cryptomonnaies (ETH/BTC). L'application fonctionne 24h/24 avec des cycles automatis√©s de collecte de donn√©es, g√©n√©ration de pr√©dictions et ex√©cution de trades intelligents.

### üéØ Principe de Fonctionnement

L'application suit un **cycle automatis√© strict** :

1. **üïê Toutes les 5 minutes** : Surveillance des positions (stop-loss/take-profit)
2. **üïë Toutes les heures** : Collecte donn√©es + pr√©dictions TimesFM + signaux trading
3. **ü§ñ En continu** : Interface temps r√©el avec pr√©dictions mises √† jour

---

## üåê Acc√®s √† l'Application

### üñ•Ô∏è **Interface Production**
- **üè† Dashboard Principal** : https://alice-predictions.pages.dev/
- **üñ•Ô∏è Terminal Trading** : https://alice-predictions.pages.dev/terminal  
- **üîê Page de Login** : https://alice-predictions.pages.dev/login *(Code: 12345)*

### üìä **Monitoring & Statut**
- **‚ö° Health Check** : https://alice-predictions.pages.dev/api/health
- **üìà Pr√©dictions ETH** : https://alice-predictions.pages.dev/api/predictions/ETH
- **ü™ô Pr√©dictions BTC** : https://alice-predictions.pages.dev/api/predictions/BTC

---

## üß† Intelligence Artificielle TimesFM

### üéØ **Mod√®le de Pr√©diction**
- **Mod√®le** : TimesFM (Time Series Foundation Model) de Google Research
- **Donn√©es d'entr√©e** : 450+ points historiques (prix OHLC + indicateurs techniques)
- **Horizon** : Pr√©dictions √† 24 heures avec intervalle de confiance
- **Indicateurs** : RSI, EMA 20/50, Bollinger Bands, ATR, momentum patterns

### üìä **M√©triques de Pr√©diction**
- **Confiance minimale** : 50% (seuil d'affichage)
- **Seuil d'ex√©cution** : >59% confiance + >1.2% variation prix
- **Fr√©quence** : Nouvelles pr√©dictions g√©n√©r√©es toutes les heures
- **Cache intelligent** : R√©utilisation pr√©dictions r√©centes (45min)

### üîç **Analyse D√©taill√©e**
Cliquez sur n'importe quelle pr√©diction pour voir :
- **Donn√©es utilis√©es** : 500 points historiques avec timestamps
- **Analyse technique** : R√©sum√© des patterns identifi√©s  
- **Pr√©cision calcul√©e** : V√©rification automatique apr√®s 24h
- **Confidence breakdown** : D√©tail du score de confiance

---

## üöÄ Architecture & Automatisation

### üèóÔ∏è **Stack Technique**
- **Backend** : Hono.js (TypeScript) sur Cloudflare Workers
- **Frontend** : HTML/CSS/JavaScript responsive avec TailwindCSS
- **Base de donn√©es** : Cloudflare D1 (SQLite distribu√©e)
- **API Prix** : CoinGecko Pro (500 calls/min avec safety buffer 85%)
- **Monitoring** : UptimeRobot pour cycles automatis√©s
- **D√©ploiement** : Cloudflare Pages avec CDN global

### ‚öôÔ∏è **Cycles d'Automatisation**

#### üïê **Monitor 5 Minutes** (`/api/trading/check-positions`)
- **Fonction** : Surveillance des positions ouvertes uniquement
- **Actions** :
  - V√©rification stop-loss et take-profit
  - Fermeture intelligente bas√©e sur pr√©dictions existantes
  - Monitoring des prix ETH/BTC temps r√©el
- **‚ö†Ô∏è Important** : Ne g√©n√®re PAS de nouvelles pr√©dictions

#### üïë **Monitor 1 Heure** (`/api/automation/hourly`)
- **Fonction** : Cycle complet d'automatisation
- **Actions** :
  - üìä Collecte donn√©es ETH/BTC dans la base de donn√©es
  - üß† G√©n√©ration pr√©dictions TimesFM (ETH + BTC)
  - üìà Analyse signaux trading avec seuils
  - üí∞ Ex√©cution automatique des trades qualifi√©s
- **‚ö†Ô∏è Critical** : SEUL endpoint qui g√©n√®re les pr√©dictions

### üõ°Ô∏è **Protection & Rate Limiting**
- **Cache 45min** : √âvite la g√©n√©ration excessive de pr√©dictions
- **Rate limiting CoinGecko** : 85% de la limite (425/500 calls/min)
- **Fallback APIs** : CoinGecko Pro ‚Üí Public API ‚Üí Prix fixes
- **Error handling** : R√©cup√©ration automatique des erreurs temporaires

---

## üìä Interface & Fonctionnalit√©s

### üé® **Dashboard Principal**
1. **Header Principal** 
   - Prix ETH/BTC en temps r√©el avec variation 24h
   - Version dynamique avec commit git (ex: v1.2.0 ‚Ä¢ 880476e)

2. **M√©triques de March√©**
   - Prix actuel avec ic√¥nes de chargement anim√©es
   - Volume 24h, Market Cap, Volatilit√©
   - Graphique TradingView int√©gr√©

3. **Pr√©dictions AI**
   - Derni√®re pr√©diction TimesFM avec confiance
   - Expected Return et Risk Range (90% confidence)
   - Historique cliquable avec popup d√©taill√©e

4. **Trading & Portfolio**
   - Balance paper trading ($10,000 initial)
   - Positions ouvertes avec P&L temps r√©el
   - Historique des trades avec performance

### üîÑ **Fonctionnalit√©s Interactives**
- **üñ±Ô∏è Pr√©dictions cliquables** : Popup avec analyse compl√®te (500 data points)
- **‚ö° Auto-refresh** : Interface mise √† jour automatiquement
- **üì± Responsive** : Optimis√© mobile/desktop/tablet
- **üé® Loading UX** : Ic√¥nes anim√©es au lieu de "N/A" pendant le chargement

---

## üóÑÔ∏è Base de Donn√©es

### üìã **Tables Principales**

#### `market_data` - Donn√©es Historiques
```sql
- symbol (ETHUSDT/BTCUSDT)
- timestamp (heures rondes UTC)
- open_price, high_price, low_price, close_price
- volume, market_cap
```

#### `ai_predictions` - Pr√©dictions TimesFM
```sql  
- prediction_id (unique)
- crypto (ETH/BTC)
- current_price, predicted_price
- confidence_score, predicted_return
- prediction_horizon, model_version
- created_at, analysis_summary
```

#### `paper_trades` - Historique Trading
```sql
- trade_id, symbol, action (BUY/SELL)
- quantity, entry_price, exit_price
- status, profit_loss, created_at
```

### üìà **Donn√©es Actuelles**
- **market_data** : 510+ points historiques par crypto (cycle complet)
- **ai_predictions** : Pr√©dictions nettoy√©es r√©guli√®rement (4-10 pr√©dictions r√©centes)
- **paper_trades** : Historique complet des trades automatiques

---

## üîß API Documentation

### üö¶ **Endpoints de Statut**
| Endpoint | M√©thode | Description | Usage |
|----------|---------|-------------|--------|
| `/api/health` | GET | Statut + version dynamique | Monitoring g√©n√©ral |
| `/api/admin/predictions/alert-check` | GET | Alerte si pas de pr√©dictions >70min | Monitoring critique |
| `/api/admin/predictions/rate-limit` | GET | Analyse fr√©quence pr√©dictions | Debug fr√©quence |

### üìä **Endpoints de Donn√©es**
| Endpoint | M√©thode | Description | Cache |
|----------|---------|-------------|--------|
| `/api/market/ETH` | GET | Prix ETH temps r√©el + fallbacks | Aucun |
| `/api/market/BTC` | GET | Prix BTC temps r√©el + fallbacks | Aucun |
| `/api/predictions/ETH` | GET | Pr√©diction ETH (avec cache) | 45min |
| `/api/predictions/BTC` | GET | Pr√©diction BTC (avec cache) | 45min |
| `/api/predictions/history` | GET | Historique toutes pr√©dictions | Aucun |
| `/api/predictions/details/:id` | GET | D√©tail pr√©diction + data points | Aucun |

### ü§ñ **Endpoints d'Automatisation** *(UptimeRobot)*
| Endpoint | M√©thode | Description | Fr√©quence |
|----------|---------|-------------|-----------|
| `/api/automation/hourly` | GET | **CYCLE PRINCIPAL** | **1 heure** |
| `/api/trading/check-positions` | GET | **MONITORING POSITIONS** | **5 minutes** |

### üõ†Ô∏è **Endpoints d'Administration**
| Endpoint | M√©thode | Description | Usage |
|----------|---------|-------------|--------|
| `/api/admin/predictions/cleanup-all` | DELETE | Supprime TOUTES les pr√©dictions | Reset syst√®me |
| `/api/admin/predictions/cleanup-get` | GET | Nettoie pr√©dictions (garde N derni√®res) | Maintenance |

---

## üö® Monitoring & Alertes

### ‚è∞ **Syst√®me d'Alertes**
L'endpoint `/api/admin/predictions/alert-check` surveille la g√©n√©ration de pr√©dictions :

- **‚úÖ OK** : Derni√®re pr√©diction < 50 minutes
- **‚ö†Ô∏è WARNING** : Derni√®re pr√©diction 50-70 minutes
- **üö® CRITICAL** : Derni√®re pr√©diction > 70 minutes

### üìä **UptimeRobot Configuration**
1. **Monitor Position (5min)**
   - URL : `https://alice-predictions.pages.dev/api/trading/check-positions`
   - Intervalle : 300 secondes (5 minutes)
   - Action : Surveillance positions + stop-loss

2. **Monitor Automation (1h)**
   - URL : `https://alice-predictions.pages.dev/api/automation/hourly`
   - Intervalle : 3600 secondes (1 heure)
   - Action : Cycle complet (donn√©es + pr√©dictions + trading)

### üéØ **M√©triques de Performance**
- **Pr√©dictions g√©n√©r√©es** : ~4 par heure (2 ETH + 2 BTC cycles)
- **Accuracy TimesFM** : Calcul√©e automatiquement apr√®s 24h
- **Latence API** : <200ms (Cloudflare Edge)
- **Uptime** : 99.9%+ (infrastructure Cloudflare)

---

## üõ†Ô∏è Configuration & D√©ploiement

### üîë **Variables d'Environnement**
```bash
# API CoinGecko Pro (configur√©e)
COINGECKO_API_KEY=CG-x5dWQp9xfuNgFKhSDsnipde4

# Configuration Trading
TRADING_MODE=paper
INITIAL_BALANCE=10000
FEES_BPS_PER_SIDE=8

# Notifications (optionnel)
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_CHAT_ID=your_chat_id
```

### üöÄ **D√©ploiement Local**
```bash
# Installation
npm install

# Build avec injection version
npm run build

# D√©marrage local 
npm run dev

# Test sanity
curl http://localhost:8787/api/health
```

### ‚òÅÔ∏è **D√©ploiement Production**
```bash
# Build production avec version git
npm run build

# D√©ploiement Cloudflare Pages
npx wrangler pages deploy dist --project-name alice-predictions

# Configuration secrets (si n√©cessaire)
npx wrangler secret put COINGECKO_API_KEY
```

### üéØ **Token Cloudflare Actuel**
```bash
# Token API configur√©
CLOUDFLARE_API_TOKEN=_kGJoZaNYELnDi1gozegz7q7Dg9NXgXqwGLo5Nu5
CLOUDFLARE_ACCOUNT_ID=a3b792e18bf50557d951ffd6f4b52025
```

---

## üìà Performance & Co√ªts

### üí∞ **Co√ªts d'Exploitation**
- **Cloudflare Pages** : Gratuit (jusqu'√† 100k req/jour)
- **Cloudflare D1** : Gratuit (jusqu'√† 25GB stockage)
- **CoinGecko Pro API** : Incluse (cl√© existante)
- **UptimeRobot** : Gratuit (50 monitors)
- **Total mensuel** : **0‚Ç¨** üéâ

### ‚ö° **Performances Techniques**
- **Latence globale** : ~100-200ms (Cloudflare CDN)
- **Bundle size** : 204KB (optimis√©)
- **Time to Interactive** : <1 seconde
- **API Response** : <150ms (CoinGecko Pro)
- **Database queries** : <50ms (D1 SQLite)

### üìä **M√©triques Trading**
- **Pr√©dictions/jour** : ~96 (4 par heure √ó 24h)
- **Accuracy moyenne** : Calcul√©e en temps r√©el apr√®s 24h
- **Trades ex√©cut√©s** : Seulement si >59% confiance + >1.2% variation
- **Risk management** : Stop-loss -2%, Take-profit +3%

---

## üîç D√©veloppement & Debug

### üìÇ **Structure du Projet**
```
webapp/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx                 # Application Hono principale
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coingecko.ts         # Service CoinGecko Pro API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ timesfm-predictor.ts # Pr√©dicteur TimesFM
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ paper-trading.ts     # Moteur paper trading
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ version.ts           # Syst√®me versioning dynamique
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ inject-version.js        # Injection version git au build
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ *.sql                    # Schema base de donn√©es D1
‚îú‚îÄ‚îÄ public/
‚îú‚îÄ‚îÄ dist/                        # Build de production
‚îî‚îÄ‚îÄ package.json
```

### üß™ **Tests & Validation**
```bash
# Test endpoints principaux
curl https://alice-predictions.pages.dev/api/health
curl https://alice-predictions.pages.dev/api/market/ETH  
curl https://alice-predictions.pages.dev/api/predictions/ETH

# Test monitoring
curl https://alice-predictions.pages.dev/api/admin/predictions/alert-check
curl https://alice-predictions.pages.dev/api/admin/predictions/rate-limit

# Test cycle automatisation (attention: g√©n√®re pr√©dictions)
curl https://alice-predictions.pages.dev/api/automation/hourly
```

### üêõ **Debug & Logs**
- **Logs Cloudflare** : `npx wrangler pages deployment tail`
- **Local debugging** : `npm run dev` avec logs console
- **DB queries** : Logs SQL automatiques en d√©veloppement
- **API monitoring** : Health check avec m√©triques d√©taill√©es

---

## üéØ Statut Actuel

### ‚úÖ **Fonctionnalit√©s Op√©rationnelles**
- ‚úÖ **TimesFM Pr√©dictions** : G√©n√©ration automatique toutes les heures
- ‚úÖ **Monitoring UptimeRobot** : Cycles 5min et 1h fonctionnels  
- ‚úÖ **Interface Responsive** : Dashboard complet avec pr√©dictions cliquables
- ‚úÖ **Cache Intelligent** : 45min pour √©viter spam pr√©dictions
- ‚úÖ **Versioning Dynamique** : Version git en temps r√©el
- ‚úÖ **Loading UX** : Ic√¥nes anim√©es au lieu de "N/A"
- ‚úÖ **Rate Limiting** : Protection CoinGecko API + fallbacks
- ‚úÖ **Database Optimis√©e** : 510+ points historiques par crypto
- ‚úÖ **Alertes Monitoring** : D√©tection absence pr√©dictions >70min

### üéä **Derni√®res Am√©liorations**
- **Fr√©quence corrig√©e** : Pr√©dictions 5min ‚Üí 1h (r√©solu)
- **Popup d√©taill√©e** : Analyse compl√®te avec 500 data points
- **Cleanup syst√®me** : Nettoyage pr√©dictions anciennes
- **Loading animations** : Remplacement "N/A" par spinners
- **Alert system** : Monitoring critique automatique

### üöÄ **Prochaines √âvolutions Possibles**
- **Backtesting** : Test strat√©gies sur donn√©es historiques
- **Indicateurs avanc√©s** : MACD, Stochastic RSI, Ichimoku  
- **Multi-timeframes** : Pr√©dictions 1h, 4h, 24h
- **Real trading** : Int√©gration exchange (Binance, Coinbase)
- **Mobile app** : Application native iOS/Android

---

## üìû Support & Documentation

### üîó **Liens Utiles**
- **üåê Application Live** : https://alice-predictions.pages.dev/
- **üß† TimesFM Research** : https://research.google/blog/a-decoder-only-foundation-model-for-time-series-forecasting/
- **‚òÅÔ∏è Cloudflare Pages** : https://pages.cloudflare.com/
- **üìä CoinGecko Pro** : https://www.coingecko.com/en/api/pricing

### üí° **Contact & Issues**
- **GitHub Repository** : https://github.com/benjaduval/eth-trader
- **Issues & Features** : Utiliser GitHub Issues
- **Documentation** : Ce README (maintenu √† jour)

---

## üèÜ Conclusion

**Alice Predictions** est un syst√®me de trading AI **enti√®rement automatis√©**, **gratuit** et **performant** qui fonctionne 24h/24 sur l'infrastructure Cloudflare. 

L'application utilise le mod√®le TimesFM de Google Research pour g√©n√©rer des pr√©dictions de haute qualit√© sur ETH/BTC, avec une interface moderne et des m√©triques transparentes.

**üéØ Perfect pour** : Traders crypto, d√©veloppeurs AI, passionn√©s de quantitative finance et d'automatisation.

---

*Derni√®re mise √† jour : 26 septembre 2025*  
*Version : v1.2.0 ‚Ä¢ 880476e*  
*Powered by TimesFM, CoinGecko Pro & Cloudflare*