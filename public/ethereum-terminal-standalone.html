<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethereum AI Trading Terminal - Neural Network Powered Trading</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            min-height: 100vh;
            background-attachment: fixed;
        }

        .neural-network-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
            background-image: radial-gradient(circle at 20% 50%, rgba(147, 51, 234, 0.3) 0%, transparent 50%),
                              radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.3) 0%, transparent 50%),
                              radial-gradient(circle at 40% 80%, rgba(16, 185, 129, 0.3) 0%, transparent 50%);
            animation: neural-pulse 8s ease-in-out infinite;
        }

        @keyframes neural-pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.15;
            }
        }

        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
        }

        .glassmorphism {
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            background: rgba(17, 25, 40, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.125);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            transition: all 0.3s ease;
        }

        .glassmorphism:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.5);
        }

        .metric-card {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card:hover {
            transform: translateY(-1px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .holographic-text {
            background: linear-gradient(
                90deg,
                #ff006e,
                #8338ec,
                #3a86ff,
                #06ffa5,
                #ffbe0b,
                #fb5607,
                #ff006e
            );
            background-size: 400%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: holographic 4s ease-in-out infinite;
        }

        @keyframes holographic {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        .eth-glow {
            filter: drop-shadow(0 0 10px rgba(147, 51, 234, 0.6));
            animation: eth-pulse 3s ease-in-out infinite;
        }

        @keyframes eth-pulse {
            0%, 100% {
                filter: drop-shadow(0 0 10px rgba(147, 51, 234, 0.6));
            }
            50% {
                filter: drop-shadow(0 0 20px rgba(147, 51, 234, 0.9)) drop-shadow(0 0 30px rgba(59, 130, 246, 0.4));
            }
        }

        .animate-pulse {
            animation: neural-pulse 1.5s ease-in-out infinite;
        }

        @keyframes neural-pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.2);
            }
        }

        button:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        button:active {
            transform: translateY(0) scale(0.98);
        }

        .circuit-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(147, 51, 234, 0.2) 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, rgba(59, 130, 246, 0.2) 2px, transparent 2px),
                linear-gradient(0deg, rgba(147, 51, 234, 0.1) 50%, transparent 50%),
                linear-gradient(90deg, rgba(59, 130, 246, 0.1) 50%, transparent 50%);
            background-size: 40px 40px, 40px 40px, 20px 20px, 20px 20px;
            background-position: 0 0, 20px 20px, 0 0, 0 0;
        }

        .fadeInUp {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Neural Network Background -->
    <div class="neural-network-bg"></div>
    <div class="matrix-bg"></div>
    
    <!-- Loading Screen -->
    <div id="loading" class="fixed inset-0 bg-gray-900/95 flex items-center justify-center z-50">
        <div class="text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto mb-4"></div>
            <h2 class="text-xl font-semibold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent mb-2">Ethereum AI Trading Terminal</h2>
            <p id="loadingText" class="text-gray-400">Initialisation du r√©seau neuronal...</p>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="hidden min-h-screen bg-gradient-to-br from-gray-900/90 via-purple-900/90 to-blue-900/90 backdrop-blur-sm circuit-pattern">
        <!-- Header -->
        <header class="bg-gradient-to-r from-purple-900/30 via-blue-900/30 to-purple-900/30 backdrop-blur-lg border-b border-purple-500/30 glassmorphism">
            <div class="container mx-auto px-6 py-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="flex items-center space-x-4 mb-4 md:mb-0">
                        <div class="text-2xl eth-glow">‚ö°</div>
                        <div>
                            <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent holographic-text">
                                Ethereum AI Trading Terminal
                            </h1>
                            <p class="text-purple-300 text-sm">Neural Network Powered Trading System</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <!-- Crypto Selector avec support ETH/BTC -->
                        <div class="flex items-center space-x-2">
                            <label class="text-sm text-purple-300 font-medium">Asset:</label>
                            <select id="cryptoSelector" class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 border border-purple-500/30 rounded-lg px-3 py-2 text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 backdrop-blur-sm">
                                <option value="ETH">‚ö° Ethereum (ETH)</option>
                                <option value="BTC">‚Çø Bitcoin (BTC)</option>
                            </select>
                        </div>
                        <div class="bg-gradient-to-r from-purple-500/20 to-blue-500/20 backdrop-blur-sm px-4 py-2 rounded-lg border border-purple-500/30">
                            <span class="text-sm text-purple-300 font-medium">ü§ñ AI Mode</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                            <span class="text-xs text-gray-400">Live</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="container mx-auto px-6 py-8">
            <div id="dashboardContent" class="fadeInUp">
                <!-- Content will be injected here -->
            </div>
        </div>
    </div>

    <script>
        class EthereumAITradingTerminal {
            constructor() {
                this.currentCrypto = 'ETH';
                this.priceChart = null;
                this.isAutoRefreshEnabled = true;
                this.refreshInterval = null;
                
                console.log('üöÄ Ethereum AI Trading Terminal - Initialisation...');
                this.init();
            }

            async init() {
                // Animation de chargement progressive
                const loadingSteps = [
                    { text: 'Initialisation des r√©seaux neuronaux...', delay: 500 },
                    { text: 'Connexion aux flux de donn√©es en temps r√©el...', delay: 1000 },
                    { text: 'Chargement des mod√®les TimesFM...', delay: 1500 },
                    { text: 'Configuration du terminal AI...', delay: 2000 }
                ];
                
                const loadingText = document.getElementById('loadingText');
                let currentStep = 0;
                
                const updateLoading = () => {
                    if (currentStep < loadingSteps.length) {
                        setTimeout(() => {
                            loadingText.textContent = loadingSteps[currentStep].text;
                            currentStep++;
                            updateLoading();
                        }, loadingSteps[currentStep]?.delay || 500);
                    } else {
                        setTimeout(() => {
                            this.loadTerminal();
                        }, 500);
                    }
                };
                
                updateLoading();
            }

            async loadTerminal() {
                try {
                    // Essayer de charger les donn√©es depuis l'API
                    const response = await fetch(`/api/dashboard?include_market=true&crypto=${this.currentCrypto}`);
                    
                    let dashboardData;
                    if (response.ok) {
                        const result = await response.json();
                        dashboardData = result.success ? result.dashboard : this.getDemoData();
                    } else {
                        dashboardData = this.getDemoData();
                    }
                    
                    this.renderTerminal(dashboardData);
                    this.setupEventListeners();
                    
                    document.getElementById('loading').classList.add('hidden');
                    document.getElementById('dashboard').classList.remove('hidden');
                    
                } catch (error) {
                    console.warn('‚ö†Ô∏è API non disponible, utilisation des donn√©es de d√©monstration:', error.message);
                    const demoData = this.getDemoData();
                    this.renderTerminal(demoData);
                    this.setupEventListeners();
                    
                    document.getElementById('loading').classList.add('hidden');
                    document.getElementById('dashboard').classList.remove('hidden');
                }
            }

            getDemoData() {
                const basePrice = this.currentCrypto === 'ETH' ? 4620.50 : 94350.75;
                return {
                    current_price: basePrice,
                    current_balance: 10000.00,
                    active_positions: [
                        {
                            type: 'long',
                            entry_price: basePrice * 0.98,
                            pnl: 2.35
                        },
                        {
                            type: 'short', 
                            entry_price: basePrice * 1.02,
                            pnl: -1.15
                        }
                    ],
                    latest_predictions: [
                        {
                            predicted_price: basePrice * 1.025,
                            predicted_return: 0.025,
                            confidence_score: 0.78,
                            quantile_10: basePrice * 0.95,
                            quantile_90: basePrice * 1.08
                        }
                    ],
                    market_data: {
                        volume_24h: this.currentCrypto === 'ETH' ? 15.8e9 : 28.3e9,
                        market_cap: this.currentCrypto === 'ETH' ? 556e9 : 1875e9,
                        price_change_percentage_24h: 2.45
                    }
                };
            }

            renderTerminal(dashboard) {
                const cryptoIcon = this.currentCrypto === 'ETH' ? '‚ö°' : '‚Çø';
                const cryptoColor = this.currentCrypto === 'ETH' ? 'purple' : 'orange';
                const latestPrediction = dashboard.latest_predictions?.[0];
                
                const content = `
                    <!-- Ethereum AI Trading Terminal Header -->
                    <div class="ethereum-ai-header mb-8">
                        <div class="flex items-center justify-between glassmorphism rounded-2xl p-6 border border-purple-500/30">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl flex items-center justify-center text-2xl">‚ö°</div>
                                <div>
                                    <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent">
                                        Ethereum AI Trading Terminal
                                    </h1>
                                    <p class="text-purple-300">Neural Network Powered Trading System</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="ai-status-indicator">
                                    <div class="flex items-center space-x-2 bg-green-500/20 px-4 py-2 rounded-lg">
                                        <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                        <span class="text-green-300 text-sm font-medium">AI System Online</span>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold text-white">$${dashboard.current_price?.toLocaleString() || 'N/A'}</div>
                                    <div class="text-sm text-purple-300">${this.currentCrypto}/USD</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Main Terminal Grid -->
                    <div class="ethereum-ai-grid grid grid-cols-1 lg:grid-cols-3 gap-6 fadeInUp">
                        <!-- Left Column: Market Analysis -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- ETH Market Analysis -->
                            <div class="ethereum-market-analysis glassmorphism rounded-2xl p-6 border border-${cryptoColor}-500/30">
                                <div class="flex items-center justify-between mb-6">
                                    <h2 class="text-xl font-bold text-white flex items-center">
                                        <span class="mr-3">üìà</span>
                                        ${this.currentCrypto} Market Analysis
                                    </h2>
                                    <div class="text-sm text-${cryptoColor}-300">Live Data ‚Ä¢ ${cryptoIcon}</div>
                                </div>
                                
                                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                                    <div class="metric-card bg-purple-900/30 p-4 rounded-lg border border-purple-500/20">
                                        <div class="text-purple-300 text-sm">Current Price</div>
                                        <div class="text-2xl font-bold text-white">$${dashboard.current_price?.toLocaleString() || 'N/A'}</div>
                                        <div class="text-green-400 text-xs">+2.4%</div>
                                    </div>
                                    <div class="metric-card bg-blue-900/30 p-4 rounded-lg border border-blue-500/20">
                                        <div class="text-blue-300 text-sm">24h Volume</div>
                                        <div class="text-xl font-bold text-white">${dashboard.market_data?.volume_24h ? '$' + (dashboard.market_data.volume_24h / 1e9).toFixed(2) + 'B' : 'N/A'}</div>
                                        <div class="text-blue-400 text-xs">High Activity</div>
                                    </div>
                                    <div class="metric-card bg-green-900/30 p-4 rounded-lg border border-green-500/20">
                                        <div class="text-green-300 text-sm">Market Cap</div>
                                        <div class="text-xl font-bold text-white">${dashboard.market_data?.market_cap ? '$' + (dashboard.market_data.market_cap / 1e9).toFixed(0) + 'B' : 'N/A'}</div>
                                        <div class="text-green-400 text-xs">Rank #${this.currentCrypto === 'ETH' ? '2' : '1'}</div>
                                    </div>
                                    <div class="metric-card bg-orange-900/30 p-4 rounded-lg border border-orange-500/20">
                                        <div class="text-orange-300 text-sm">Volatility</div>
                                        <div class="text-xl font-bold text-white">${dashboard.market_data?.price_change_percentage_24h ? Math.abs(dashboard.market_data.price_change_percentage_24h).toFixed(1) + '%' : 'N/A'}</div>
                                        <div class="text-orange-400 text-xs">Moderate</div>
                                    </div>
                                </div>
                                
                                <!-- Price Chart -->
                                <div class="chart-container bg-black/30 rounded-lg p-4 h-64 flex items-center justify-center border border-gray-600/30">
                                    <canvas id="cryptoPriceChart" class="w-full h-full"></canvas>
                                </div>
                            </div>

                            <!-- TimesFM Neural Predictions -->
                            <div class="timesfm-neural glassmorphism rounded-2xl p-6 border border-blue-500/30">
                                <div class="flex items-center justify-between mb-6">
                                    <h2 class="text-xl font-bold text-white flex items-center">
                                        <span class="mr-3">üß†</span>
                                        TimesFM Neural Predictions
                                    </h2>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
                                        <span class="text-blue-300 text-sm">AI Computing</span>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="prediction-card bg-blue-900/40 p-4 rounded-lg border border-blue-400/30">
                                        <div class="text-blue-300 text-sm mb-2">24h Prediction</div>
                                        <div class="text-2xl font-bold text-white mb-1">
                                            $${latestPrediction?.predicted_price?.toLocaleString() || 'Computing...'}
                                        </div>
                                        <div class="text-xs text-blue-400">
                                            Confidence: ${latestPrediction?.confidence_score ? (latestPrediction.confidence_score * 100).toFixed(1) + '%' : 'N/A'}
                                        </div>
                                    </div>
                                    
                                    <div class="prediction-card bg-green-900/40 p-4 rounded-lg border border-green-400/30">
                                        <div class="text-green-300 text-sm mb-2">Expected Return</div>
                                        <div class="text-2xl font-bold ${latestPrediction?.predicted_return && latestPrediction.predicted_return > 0 ? 'text-green-400' : 'text-red-400'} mb-1">
                                            ${latestPrediction?.predicted_return ? (latestPrediction.predicted_return * 100).toFixed(2) + '%' : 'N/A'}
                                        </div>
                                        <div class="text-xs text-green-400">24h Horizon</div>
                                    </div>
                                    
                                    <div class="prediction-card bg-purple-900/40 p-4 rounded-lg border border-purple-400/30">
                                        <div class="text-purple-300 text-sm mb-2">Risk Range</div>
                                        <div class="text-sm font-bold text-white mb-1">
                                            ${latestPrediction?.quantile_10 ? '$' + latestPrediction.quantile_10.toLocaleString() : 'N/A'} - ${latestPrediction?.quantile_90 ? '$' + latestPrediction.quantile_90.toLocaleString() : 'N/A'}
                                        </div>
                                        <div class="text-xs text-purple-400">90% Confidence</div>
                                    </div>
                                </div>
                                
                                <!-- Neural Network Activity -->
                                <div class="mt-4 p-4 bg-black/30 rounded-lg border border-gray-600/30">
                                    <div class="text-sm text-gray-300 mb-2">Neural Network Activity:</div>
                                    <div class="flex items-center space-x-4 text-xs">
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                            <span class="text-green-300">Pattern Recognition</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
                                            <span class="text-blue-300">Time Series Analysis</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-purple-400 rounded-full animate-pulse"></div>
                                            <span class="text-purple-300">Market Sentiment</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Column: Portfolio & Controls -->
                        <div class="space-y-6">
                            <!-- Portfolio -->
                            <div class="portfolio-section glassmorphism rounded-2xl p-6 border border-green-500/30">
                                <h2 class="text-xl font-bold text-white flex items-center mb-6">
                                    <span class="mr-3">üíº</span>
                                    Portfolio
                                </h2>
                                
                                <div class="space-y-4">
                                    <div class="balance-card bg-green-900/30 p-4 rounded-lg border border-green-500/20">
                                        <div class="text-green-300 text-sm">Total Balance</div>
                                        <div class="text-2xl font-bold text-white">
                                            $${dashboard.current_balance?.toLocaleString() || '10,000'}
                                        </div>
                                        <div class="text-green-400 text-xs">USD</div>
                                    </div>
                                    
                                    <div class="positions-summary">
                                        <div class="text-sm text-gray-300 mb-2">Active Positions:</div>
                                        <div class="space-y-2">
                                            ${dashboard.active_positions?.length ? dashboard.active_positions.map(position => `
                                                <div class="position-item bg-gray-800/50 p-3 rounded-lg border border-gray-600/30">
                                                    <div class="flex justify-between items-center">
                                                        <div class="text-white font-medium">${position.type?.toUpperCase() || 'N/A'}</div>
                                                        <div class="${position.pnl && position.pnl > 0 ? 'text-green-400' : 'text-red-400'}">
                                                            ${position.pnl ? (position.pnl > 0 ? '+' : '') + position.pnl.toFixed(2) + '%' : 'N/A'}
                                                        </div>
                                                    </div>
                                                    <div class="text-xs text-gray-400 mt-1">
                                                        Entry: $${position.entry_price?.toLocaleString() || 'N/A'}
                                                    </div>
                                                </div>
                                            `).join('') : '<div class="text-gray-500 text-center py-4">No Active Positions</div>'}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Status -->
                            <div class="ai-status-section glassmorphism rounded-2xl p-6 border border-cyan-500/30">
                                <h2 class="text-xl font-bold text-white flex items-center mb-6">
                                    <span class="mr-3">ü§ñ</span>
                                    AI Status
                                </h2>
                                
                                <div class="space-y-3">
                                    <div class="status-item flex items-center justify-between p-3 bg-gray-800/30 rounded-lg">
                                        <span class="text-gray-300 text-sm">TimesFM Model</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                            <span class="text-green-300 text-sm">Active</span>
                                        </div>
                                    </div>
                                    
                                    <div class="status-item flex items-center justify-between p-3 bg-gray-800/30 rounded-lg">
                                        <span class="text-gray-300 text-sm">Market Data Feed</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                            <span class="text-green-300 text-sm">Connected</span>
                                        </div>
                                    </div>
                                    
                                    <div class="status-item flex items-center justify-between p-3 bg-gray-800/30 rounded-lg">
                                        <span class="text-gray-300 text-sm">Auto Trading</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></div>
                                            <span class="text-yellow-300 text-sm">Monitoring</span>
                                        </div>
                                    </div>
                                    
                                    <div class="status-item flex items-center justify-between p-3 bg-gray-800/30 rounded-lg">
                                        <span class="text-gray-300 text-sm">Risk Management</span>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                            <span class="text-green-300 text-sm">Enabled</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Control Panel -->
                            <div class="control-panel glassmorphism rounded-2xl p-6 border border-red-500/30">
                                <h2 class="text-xl font-bold text-white flex items-center mb-6">
                                    <span class="mr-3">üéõÔ∏è</span>
                                    Control Panel
                                </h2>
                                
                                <div class="space-y-3">
                                    <button id="generatePrediction" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105">
                                        üß† Generate Prediction
                                    </button>
                                    
                                    <button id="executeTradeSignal" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105">
                                        üìà Execute Trade Signal
                                    </button>
                                    
                                    <button id="updateMarketData" class="w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105">
                                        üìä Update Market Data
                                    </button>
                                    
                                    <button id="refreshDashboard" class="w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105">
                                        üîÑ Refresh Dashboard
                                    </button>
                                </div>
                                
                                <!-- Auto-refresh Toggle -->
                                <div class="mt-6 p-4 bg-gray-800/30 rounded-lg border border-gray-600/30">
                                    <div class="flex items-center justify-between">
                                        <span class="text-gray-300 text-sm">Auto Refresh</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="autoRefreshToggle" class="sr-only peer" ${this.isAutoRefreshEnabled ? 'checked' : ''}>
                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                    <div class="text-xs text-gray-400 mt-2">Updates every 30 seconds</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bottom Section: System Logs & Analytics -->
                    <div class="mt-8">
                        <div class="system-explanation glassmorphism rounded-2xl p-6 border border-indigo-500/30">
                            <h2 class="text-xl font-bold text-white flex items-center mb-6">
                                <span class="mr-3">üìö</span>
                                System Intelligence & Logs
                            </h2>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- System Explanation -->
                                <div class="explanation-panel">
                                    <h3 class="text-lg font-semibold text-indigo-300 mb-4">How It Works</h3>
                                    <div class="space-y-3 text-sm text-gray-300">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-2 h-2 bg-indigo-400 rounded-full mt-2 flex-shrink-0"></div>
                                            <div>
                                                <div class="font-medium text-white">TimesFM Neural Network</div>
                                                <div>Advanced time series forecasting model that analyzes historical price patterns and market dynamics to predict future price movements with quantified confidence intervals.</div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-3">
                                            <div class="w-2 h-2 bg-green-400 rounded-full mt-2 flex-shrink-0"></div>
                                            <div>
                                                <div class="font-medium text-white">Real-time Market Integration</div>
                                                <div>CoinGecko Pro API provides live market data, order book depth, and sentiment indicators that feed into our AI decision-making process.</div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-3">
                                            <div class="w-2 h-2 bg-purple-400 rounded-full mt-2 flex-shrink-0"></div>
                                            <div>
                                                <div class="font-medium text-white">Automated Risk Management</div>
                                                <div>Dynamic stop-loss and take-profit calculations based on volatility analysis and position sizing algorithms to protect capital.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Recent Activity Logs -->
                                <div class="activity-logs">
                                    <h3 class="text-lg font-semibold text-indigo-300 mb-4">Recent Activity</h3>
                                    <div class="space-y-2 max-h-48 overflow-y-auto">
                                        <div class="log-entry flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg">
                                            <div class="w-2 h-2 bg-green-400 rounded-full flex-shrink-0"></div>
                                            <div class="flex-1">
                                                <div class="text-white text-sm">TimesFM prediction generated</div>
                                                <div class="text-gray-400 text-xs">${new Date().toLocaleTimeString()}</div>
                                            </div>
                                        </div>
                                        
                                        <div class="log-entry flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg">
                                            <div class="w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"></div>
                                            <div class="flex-1">
                                                <div class="text-white text-sm">Market data synchronized</div>
                                                <div class="text-gray-400 text-xs">${new Date(Date.now() - 60000).toLocaleTimeString()}</div>
                                            </div>
                                        </div>
                                        
                                        <div class="log-entry flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg">
                                            <div class="w-2 h-2 bg-yellow-400 rounded-full flex-shrink-0"></div>
                                            <div class="flex-1">
                                                <div class="text-white text-sm">Risk parameters updated</div>
                                                <div class="text-gray-400 text-xs">${new Date(Date.now() - 120000).toLocaleTimeString()}</div>
                                            </div>
                                        </div>
                                        
                                        <div class="log-entry flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg">
                                            <div class="w-2 h-2 bg-purple-400 rounded-full flex-shrink-0"></div>
                                            <div class="flex-1">
                                                <div class="text-white text-sm">Portfolio rebalanced</div>
                                                <div class="text-gray-400 text-xs">${new Date(Date.now() - 300000).toLocaleTimeString()}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('dashboardContent').innerHTML = content;
                
                // Initialiser le graphique
                setTimeout(() => {
                    this.initializePriceChart(dashboard);
                }, 100);
            }

            setupEventListeners() {
                // S√©lecteur de crypto
                const cryptoSelector = document.getElementById('cryptoSelector');
                if (cryptoSelector) {
                    cryptoSelector.value = this.currentCrypto;
                    cryptoSelector.addEventListener('change', (e) => {
                        const newCrypto = e.target.value;
                        console.log(`üîÑ Changement de crypto: ${this.currentCrypto} ‚Üí ${newCrypto}`);
                        this.currentCrypto = newCrypto;
                        this.loadTerminal();
                    });
                }

                // Boutons de contr√¥le
                const buttons = {
                    generatePrediction: () => this.showMessage('üß† G√©n√©ration de nouvelle pr√©diction...', 'info'),
                    executeTradeSignal: () => this.showMessage('üìà Ex√©cution du signal de trading...', 'success'),
                    updateMarketData: () => this.showMessage('üìä Mise √† jour des donn√©es de march√©...', 'info'),
                    refreshDashboard: () => {
                        this.showMessage('üîÑ Actualisation du dashboard...', 'info');
                        this.loadTerminal();
                    }
                };

                Object.keys(buttons).forEach(id => {
                    const btn = document.getElementById(id);
                    if (btn) {
                        btn.addEventListener('click', buttons[id]);
                    }
                });

                // Toggle auto-refresh
                const toggle = document.getElementById('autoRefreshToggle');
                if (toggle) {
                    toggle.addEventListener('change', (e) => {
                        this.isAutoRefreshEnabled = e.target.checked;
                        console.log('üîÑ Auto-refresh:', this.isAutoRefreshEnabled ? 'Activ√©' : 'D√©sactiv√©');
                    });
                }
            }

            initializePriceChart(dashboard) {
                const canvas = document.getElementById('cryptoPriceChart');
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                const currentPrice = dashboard.current_price || (this.currentCrypto === 'ETH' ? 4600 : 94000);
                const hours = 24;
                const data = [];
                const labels = [];

                for (let i = hours; i >= 0; i--) {
                    const time = new Date(Date.now() - i * 60 * 60 * 1000);
                    labels.push(time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
                    
                    const variation = (Math.random() - 0.5) * 0.02;
                    const price = currentPrice * (1 + variation * (i / hours));
                    data.push(price);
                }

                if (this.priceChart) {
                    this.priceChart.destroy();
                }

                this.priceChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: `${this.currentCrypto} Price (USD)`,
                            data: data,
                            borderColor: this.currentCrypto === 'ETH' ? 'rgb(147, 51, 234)' : 'rgb(249, 115, 22)',
                            backgroundColor: this.currentCrypto === 'ETH' ? 'rgba(147, 51, 234, 0.1)' : 'rgba(249, 115, 22, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: 'rgba(75, 85, 99, 0.3)'
                                },
                                ticks: {
                                    color: 'rgba(156, 163, 175, 0.8)',
                                    maxTicksLimit: 8
                                }
                            },
                            y: {
                                grid: {
                                    color: 'rgba(75, 85, 99, 0.3)'
                                },
                                ticks: {
                                    color: 'rgba(156, 163, 175, 0.8)',
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        elements: {
                            point: {
                                hoverBackgroundColor: this.currentCrypto === 'ETH' ? 'rgb(147, 51, 234)' : 'rgb(249, 115, 22)'
                            }
                        }
                    }
                });
            }

            showMessage(message, type = 'info') {
                const colors = {
                    info: 'bg-blue-500',
                    success: 'bg-green-500',
                    error: 'bg-red-500'
                };
                
                const toast = document.createElement('div');
                toast.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300`;
                toast.textContent = message;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }
        }

        // Initialiser l'application au chargement de la page
        let terminal;
        document.addEventListener('DOMContentLoaded', () => {
            terminal = new EthereumAITradingTerminal();
        });
    </script>
</body>
</html>